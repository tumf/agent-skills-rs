---
change_id: support-comma-separated-agent
title: --agent のカンマ区切り複数指定を有効化
status: draft
created_at: 2026-02-08
---

# 変更提案

## 背景
`--agent` は CLI 引数として定義されているものの、現在は単一値前提かつ実処理に接続されていません。ユーザーは `--agent claude,opencode` のようなカンマ区切り指定で複数 platform へ配布できることを求めています。

## 目的
- `--agent` のカンマ区切り指定を許可し、複数 platform へ同時配布できるようにする。
- 既存の単一指定や挙動（canonical 配置、symlink/copy フォールバック）を維持する。

## 非目的
- 新しい platform の追加や検出ロジックの拡張
- 外部プロバイダの追加や通信を伴う検証

## 変更概要
- `--agent` をカンマ区切りで複数指定可能にする。
- 同時に `--agent` を複数回指定する形式も許可する。
- 解析した agent の順序を保持しつつ重複を除外する。
- 未知の agent が含まれる場合はエラーで停止する。

## リスクと対策
- 既存 CLI スキーマの説明と乖離する可能性: イントロスペクションの説明文を更新する。
- 無効な agent 名が紛れた場合の挙動: 明示的にエラーを返す仕様を追加する。

## 影響範囲
- CLI 引数解析
- インストール経路のターゲット解決
- イントロスペクションの説明文
