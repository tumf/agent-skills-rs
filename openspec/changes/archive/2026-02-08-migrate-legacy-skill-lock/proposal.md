# 仕様追従のためのproposal

## 背景
`agent-skills-rs install-skills --global` 実行時に、vercel-lab/AgentSkills 由来の旧ロックファイル（配列形式）が読み込めずに失敗する。
現行のロックファイル仕様は `skills` を HashMap として読み込むため、旧形式との互換がない。

## 目的
- 旧形式ロックファイルを自動的に読み込み可能にする
- 読み込み時に新形式へ安全にマイグレーションする
- 既存の新形式との互換性を維持する

## 範囲
- ロックファイル読み込み時のデシリアライズ互換
- 旧形式から新形式への変換規則の追加
- 互換性確認のテスト追加

## 非目標
- 旧形式ロックファイルの完全な内容再構成（不足情報の復元）
- 外部システムやネットワークに依存する検証

## リスクと対策
- 旧形式の不足情報（ハッシュやタイムスタンプ）
  - 対策: マイグレーション時にデフォルト値を適用し、後続の更新処理で補完

## 影響
- `install` のロックファイル読み込み処理が旧形式にも対応
- 既存の新形式データは影響なし
